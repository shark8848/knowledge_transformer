# Copy of multimodal envs. Replace placeholders with your real values (do not commit secrets).
# 选择默认提供商：bailian 或 teamshub
LLM_default_provider=teamshub

# --- Ali Bailian / DashScope multimodal keys ---
BAILIAN_API_KEY=<your_bailian_api_key>
BAILIAN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
BAILIAN_MULTIMODAL_MODEL=qwen-vl-plus
BAILIAN_LLM_MODEL=qwen-plus
BAILIAN_EMBEDDING_MODEL=text-embedding-v1

# --- ASR (Whisper) ---
ASR_processing__model_name=base
ASR_processing__device=cpu
ASR_processing__task=transcribe
ASR_processing__language=
ASR_processing__tmp_dir=/tmp/asr_service

# --- Teamshub LLM keys ---
TEAMSHUB_API_KEY=<your_teamshub_token>
TEAMSHUB_BASE_URL=https://aicp.teamshub.com/ai-paas/ai-open/sitech/aiopen/stream/aliyun-Qwen3-32B-developing-ws/v1/chat/completions
TEAMSHUB_MODEL=qwen3-32b
TEAMSHUB_STREAM=false            # 默认关闭流式
TEAMSHUB_ENABLE_THINKING=false

# Teamshub 配置
LLM_teamshub__token=${LLM_teamshub__token:-$TEAMSHUB_API_KEY}
LLM_teamshub__api_base=${LLM_teamshub__api_base:-$TEAMSHUB_BASE_URL}
LLM_teamshub__model=${LLM_teamshub__model:-$TEAMSHUB_MODEL}
LLM_teamshub__stream=${LLM_teamshub__stream:-$TEAMSHUB_STREAM}
LLM_teamshub__enable_thinking=${LLM_teamshub__enable_thinking:-$TEAMSHUB_ENABLE_THINKING}

# --- RAG converter (global) ---
RAG_celery__broker_url=${RAG_celery__broker_url:-redis://:<redis_password>@localhost:6379/0}
RAG_celery__result_backend=${RAG_celery__result_backend:-redis://:<redis_password>@localhost:6379/1}

# --- LLM service configuration ---
LLM_bailian__api_key=${LLM_bailian__api_key:-$BAILIAN_API_KEY}
LLM_bailian__api_base=${LLM_bailian__api_base:-$BAILIAN_BASE_URL}
LLM_bailian__model=${LLM_bailian__model:-$BAILIAN_LLM_MODEL}
LLM_celery__broker_url=${LLM_celery__broker_url:-redis://localhost:6379/0}
LLM_celery__result_backend=${LLM_celery__result_backend:-redis://localhost:6379/1}
LLM_celery__default_queue=${LLM_celery__default_queue:-llm}
LLM_FLOWER_PORT=5561

# --- Vector service configuration ---
VECTOR_bailian__api_key=${VECTOR_bailian__api_key:-$BAILIAN_API_KEY}
VECTOR_bailian__api_base=${VECTOR_bailian__api_base:-$BAILIAN_BASE_URL}
VECTOR_bailian__embed_model=${VECTOR_bailian__embed_model:-$BAILIAN_EMBEDDING_MODEL}
VECTOR_bailian__rerank_model=${VECTOR_bailian__rerank_model:-$BAILIAN_LLM_MODEL}
VECTOR_celery__broker_url=${VECTOR_celery__broker_url:-redis://localhost:6379/0}
VECTOR_celery__result_backend=${VECTOR_celery__result_backend:-redis://localhost:6379/1}
VECTOR_celery__default_queue=${VECTOR_celery__default_queue:-vector}
VECTOR_FLOWER_PORT=5562

# --- ES service configuration ---
ES_SERVICE_API_PORT=8085
ES_SERVICE_GRPC_PORT=9105
ES_SERVICE_PORT=${ES_SERVICE_PORT:-$ES_SERVICE_API_PORT}
ES_SERVICE_CELERY_LOG_LEVEL=info
ES_SERVICE_WORKER_NAME=${ES_SERVICE_WORKER_NAME:-es-service@${HOSTNAME:-local}}

ES_SERVICE_SERVICE_NAME=${ES_SERVICE_SERVICE_NAME:-es-service}
ES_SERVICE_API_VERSION=${ES_SERVICE_API_VERSION:-v1}
ES_SERVICE_BASE_URL=${ES_SERVICE_BASE_URL:-}
ES_SERVICE_HOST=${ES_SERVICE_HOST:-0.0.0.0}

ES_SERVICE_CELERY__BROKER_URL=${ES_SERVICE_CELERY__BROKER_URL:-redis://localhost:6379/0}
ES_SERVICE_CELERY__RESULT_BACKEND=${ES_SERVICE_CELERY__RESULT_BACKEND:-redis://localhost:6379/1}
ES_SERVICE_CELERY__DEFAULT_QUEUE=${ES_SERVICE_CELERY__DEFAULT_QUEUE:-es-schema-tasks}
ES_SERVICE_CELERY__TASK_TIME_LIMIT_SEC=${ES_SERVICE_CELERY__TASK_TIME_LIMIT_SEC:-300}
ES_SERVICE_CELERY__PREFETCH_MULTIPLIER=${ES_SERVICE_CELERY__PREFETCH_MULTIPLIER:-1}

ES_SERVICE_ES__ENDPOINT=${ES_SERVICE_ES__ENDPOINT:-http://localhost:9200}
ES_SERVICE_ES__USERNAME=${ES_SERVICE_ES__USERNAME:-}
ES_SERVICE_ES__PASSWORD=${ES_SERVICE_ES__PASSWORD:-}
ES_SERVICE_ES__VERIFY_SSL=${ES_SERVICE_ES__VERIFY_SSL:-false}
ES_SERVICE_ES__REQUEST_TIMEOUT_SEC=${ES_SERVICE_ES__REQUEST_TIMEOUT_SEC:-30}
ES_SERVICE_ES__BASE_INDEX=${ES_SERVICE_ES__BASE_INDEX:-kb_chunks}
ES_SERVICE_ES__DEFAULT_INDEX=${ES_SERVICE_ES__DEFAULT_INDEX:-kb_chunks_v1}
ES_SERVICE_ES__READ_ALIAS=${ES_SERVICE_ES__READ_ALIAS:-kb_chunks}
ES_SERVICE_ES__WRITE_ALIAS=${ES_SERVICE_ES__WRITE_ALIAS:-kb_chunks_write}
ES_SERVICE_ES__DEFAULT_SHARDS=${ES_SERVICE_ES__DEFAULT_SHARDS:-3}
ES_SERVICE_ES__DEFAULT_REPLICAS=${ES_SERVICE_ES__DEFAULT_REPLICAS:-1}
ES_SERVICE_ES__REFRESH_INTERVAL=${ES_SERVICE_ES__REFRESH_INTERVAL:-10s}
ES_SERVICE_ES__MAPPING_PATH=${ES_SERVICE_ES__MAPPING_PATH:-config/kb_chunks_v1_mapping.json}

# --- UI service configuration ---
UI_PORT=${UI_PORT:-7860}
UI_PIPELINE_API_URL=${UI_PIPELINE_API_URL:-http://127.0.0.1:9100}

# Optional MM_* overrides (leave commented unless needed)
# MM_bailian__api_key=<REPLACE_WITH_BAILIAN_API_KEY>
# MM_bailian__api_base=https://dashscope.aliyuncs.com/compatible-mode/v1
# MM_bailian__model=qwen-vl-plus

# --- Video service configuration ---
VIDEO_minio__endpoint=http://localhost:9000
VIDEO_minio__access_key=minioadmin
VIDEO_minio__secret_key=minioadmin
VIDEO_minio__bucket=qadata
VIDEO_minio__secure=false
VIDEO_minio__region=us-east-1

VIDEO_celery__broker_url=redis://localhost:6379/0
VIDEO_celery__result_backend=redis://localhost:6379/1
VIDEO_celery__default_queue=video
VIDEO_celery__asr_queue=video_asr
VIDEO_celery__vision_queue=video_vision
VIDEO_celery__task_time_limit_sec=600
VIDEO_celery__prefetch_multiplier=2

VIDEO_processing__frame_sample_fps=0.5
VIDEO_processing__fixed_segment_seconds=30
VIDEO_processing__frame_caption_max=8
# VIDEO_processing__language=zh
# VIDEO_processing__initial_prompt=

VIDEO_API_PORT=9200
VIDEO_FLOWER_PORT=5560
